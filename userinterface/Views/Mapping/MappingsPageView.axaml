<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:userinterface.ViewModels.Mapping"
             xmlns:ext="using:userinterface.Extensions"
             xmlns:helpers="using:userinterface.Helpers"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="userinterface.Views.Mapping.MappingsPageView"
             x:DataType="vm:MappingsPageViewModel">

	<UserControl.Styles>
		<!-- Mapping Element Animation Styles -->
		<Style Selector="Grid.MappingElement">
			<Setter Property="Opacity" Value="0"/>
			<Setter Property="RenderTransform" Value="translateY(30px)"/>
			<Setter Property="Transitions">
				<Transitions>
					<DoubleTransition Property="Opacity" Duration="0:0:0.4" Easing="QuadraticEaseOut"/>
					<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.4" Easing="BackEaseOut"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Grid.MappingElement.Visible">
			<Setter Property="Opacity" Value="1"/>
			<Setter Property="RenderTransform" Value="translateY(0px)"/>
		</Style>

		<!-- Mapping Card Styles -->
		<Style Selector="Border.MappingCard">
			<Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="Padding" Value="16"/>
			<Setter Property="Margin" Value="8"/>
			<Setter Property="BoxShadow" Value="{DynamicResource CardShadow}"/>
		</Style>

		<Style Selector="Border.MappingCard:pointerover">
			<Setter Property="BorderBrush" Value="{DynamicResource PrimaryButtonBrush}"/>
			<Setter Property="Background" Value="{DynamicResource CardHoverBackgroundBrush}"/>
		</Style>

		<Style Selector="Panel.MappingContainer">
			<Setter Property="Width" Value="392"/>
			<Setter Property="Height" Value="350"/>
		</Style>

		<!-- Selection Border Styles -->
		<Style Selector="Path.SelectionBorder">
			<Setter Property="Stroke" Value="{DynamicResource ActiveBrush}"/>
			<Setter Property="StrokeThickness" Value="3"/>
			<Setter Property="Fill" Value="Transparent"/>
			<Setter Property="IsHitTestVisible" Value="False"/>
			<Setter Property="StrokeDashArray" Value="1640"/>
			<Setter Property="ZIndex" Value="10"/>
			<Setter Property="Transitions">
				<Transitions>
					<DoubleTransition Property="StrokeDashOffset" Duration="0:0:0.8" Easing="CubicEaseOut"/>
					<DoubleTransition Property="Opacity" Duration="0:0:0.2" Easing="CubicEaseOut"/>
				</Transitions>
			</Setter>
		</Style>

		<!-- Add Button Styles -->
		<Style Selector="Button.AddButton">
			<Setter Property="Background" Value="{DynamicResource PrimaryButtonBrush}"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimaryTextBrush}"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="CornerRadius" Value="6"/>
			<Setter Property="Padding" Value="24,12"/>
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Margin" Value="0,24,0,16"/>
		</Style>

		<Style Selector="Button.AddButton:pointerover">
			<Setter Property="Background" Value="{DynamicResource PrimaryButtonHoverBrush}"/>
		</Style>

		<Style Selector="Button.AddButton:pressed">
			<Setter Property="Background" Value="{DynamicResource PrimaryButtonPressedBrush}"/>
		</Style>
	</UserControl.Styles>

	<ScrollViewer Margin="28,16,12,16">
		<StackPanel Orientation="Vertical" VerticalAlignment="Stretch">
			<ItemsRepeater Name="ItemsRepeater" ItemsSource="{Binding MappingViews}">
				<ItemsRepeater.Layout>
					<WrapLayout Orientation="Horizontal"/>
				</ItemsRepeater.Layout>
				<ItemsRepeater.ItemTemplate>
					<DataTemplate>
						<Grid x:DataType="vm:MappingViewModel" 
							  Classes="MappingElement"
							  Margin="4">
							<Border Classes="MappingCard">
								<Panel Classes="MappingContainer">
									<ContentControl Content="{Binding}"/>
								</Panel>
							</Border>
							<Path Classes="SelectionBorder"
								  Data="{Binding SelectionBorderPath}"
								  IsVisible="False"
								  helpers:MappingAnimationHelper.EnableAnimation="True"
								  HorizontalAlignment="Left"
								  VerticalAlignment="Top"
								  Margin="8,8,0,0"/>
						</Grid>
					</DataTemplate>
				</ItemsRepeater.ItemTemplate>
			</ItemsRepeater>

			<Button Classes="AddButton"
					HorizontalAlignment="Center"
					Command="{Binding AddMappingCommand}"
					Content="{ext:Localized MappingAddMapping}"/>
		</StackPanel>
	</ScrollViewer>
</UserControl>